# ğŸ¨ Personnalisation du Formulaire de RÃ©servation

## ğŸ¯ Objectif

Cette fonctionnalitÃ© permet aux hÃ´teliers de personnaliser le formulaire de rÃ©servation en masquant les champs dont ils n'ont pas besoin, rendant ainsi l'expÃ©rience client plus fluide et adaptÃ©e Ã  leurs besoins spÃ©cifiques.

## ğŸ“± Comment y accÃ©der

1. **Connexion admin** : Se connecter au dashboard administrateur
2. **Navigation** : Aller dans l'onglet "Formulaire de rÃ©servation" dans la sidebar
3. **Configuration** : Activer/dÃ©sactiver les champs selon vos besoins

## ğŸ›  FonctionnalitÃ©s

### âœ… **Champs personnalisables**

#### **Champs obligatoires (non modifiables)**

- âœ… Nombre d'adultes
- âœ… PrÃ©nom
- âœ… Nom
- âœ… Email
- âœ… TÃ©lÃ©phone mobile

#### **Champs optionnels (peuvent Ãªtre masquÃ©s)**

- ğŸ”§ Nombre d'enfants
- ğŸ”§ Date de naissance
- ğŸ”§ Lieu de naissance
- ğŸ”§ Adresse
- ğŸ”§ Code postal
- ğŸ”§ LocalitÃ©
- ğŸ”§ Pays
- ğŸ”§ NÂ° de permis ou carte d'identitÃ©
- ğŸ”§ NÂ° d'immatriculation du vÃ©hicule

### âœ… **Interface de gestion**

- **Vue d'ensemble** : AperÃ§u du nombre de champs activÃ©s
- **CatÃ©gories claires** : SÃ©paration entre champs obligatoires et optionnels
- **IcÃ´nes visuelles** : ğŸ‘ï¸ pour les champs visibles, ğŸ‘ï¸â€ğŸ—¨ï¸ pour les champs masquÃ©s
- **Descriptions** : Explication de l'utilitÃ© de chaque champ
- **Sauvegarde instantanÃ©e** : Les modifications prennent effet immÃ©diatement

## ğŸš€ **Avantages**

### **Pour l'hÃ´telier**

- **FlexibilitÃ©** : Adapter le formulaire selon ses besoins
- **SimplicitÃ©** : RÃ©duire la friction pour les clients
- **ContrÃ´le** : Choisir quelles informations collecter

### **Pour le client**

- **RapiditÃ©** : Formulaire plus court et plus rapide Ã  remplir
- **ClartÃ©** : Moins de champs inutiles Ã  remplir
- **FluiditÃ©** : ExpÃ©rience de rÃ©servation amÃ©liorÃ©e

## ğŸ¨ **Interface utilisateur**

### **Page de configuration**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¨ Personnalisation du formulaire      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 12 sur 14 champs activÃ©s               â”‚
â”‚                                         â”‚
â”‚ â„¹ï¸ Informations importantes :           â”‚
â”‚ â€¢ Les champs obligatoires ne peuvent   â”‚
â”‚   pas Ãªtre dÃ©sactivÃ©s                  â”‚
â”‚ â€¢ Configuration pour rÃ©servations nuit â”‚
â”‚ â€¢ Effet immÃ©diat                       â”‚
â”‚                                         â”‚
â”‚ ğŸ“‹ Champs obligatoires                 â”‚
â”‚ âœ… PrÃ©nom                   [Obligatoire]â”‚
â”‚ âœ… Nom                      [Obligatoire]â”‚
â”‚ âœ… Email                    [Obligatoire]â”‚
â”‚ âœ… TÃ©lÃ©phone                [Obligatoire]â”‚
â”‚                                         â”‚
â”‚ ğŸ“ Champs optionnels                   â”‚
â”‚ ğŸ‘ï¸ Date de naissance        [â˜‘ï¸]       â”‚
â”‚ ğŸ‘ï¸â€ğŸ—¨ï¸ Lieu de naissance       [â˜]       â”‚
â”‚ ğŸ‘ï¸ Adresse                  [â˜‘ï¸]       â”‚
â”‚ ğŸ‘ï¸â€ğŸ—¨ï¸ Code postal             [â˜]       â”‚
â”‚                                         â”‚
â”‚           [Sauvegarder]                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Formulaire client (exemple personnalisÃ©)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“ Informations de rÃ©servation         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Nombre d'adultes: [2] â–¼                â”‚
â”‚ PrÃ©nom: [Jean]                          â”‚
â”‚ Nom: [Dupont]                           â”‚
â”‚ Email: [jean@example.com]               â”‚
â”‚ TÃ©lÃ©phone: [+41 79 123 45 67]          â”‚
â”‚ Adresse: [Rue de la Paix 123]          â”‚
â”‚                                         â”‚
â”‚ â† Champs masquÃ©s :                      â”‚
â”‚   Date de naissance, Code postal,      â”‚
â”‚   Lieu de naissance, etc.              â”‚
â”‚                                         â”‚
â”‚        [Continuer vers le rÃ©sumÃ©]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ **Aspects techniques**

### **Base de donnÃ©es**

- **Champ ajoutÃ©** : `formConfig` (JSON) dans la table `Establishment`
- **Type** : Configuration flexible stockÃ©e en JSON
- **Valeurs par dÃ©faut** : Tous les champs activÃ©s

### **Structure de configuration**

```json
{
  "clientBirthDate": { "enabled": true, "required": false },
  "clientBirthPlace": { "enabled": false, "required": false },
  "clientAddress": { "enabled": true, "required": false },
  "clientPostalCode": { "enabled": false, "required": false },
  "clientCity": { "enabled": true, "required": false },
  "clientCountry": { "enabled": true, "required": false },
  "clientIdNumber": { "enabled": false, "required": false },
  "clientVehicleNumber": { "enabled": true, "required": false }
}
```

### **APIs crÃ©Ã©es**

- `GET /api/admin/[hotel]/form-config` - RÃ©cupÃ©rer la configuration (admin)
- `POST /api/admin/[hotel]/form-config` - Sauvegarder la configuration (admin)
- `GET /api/establishments/[hotel]/form-config` - Configuration publique (client)

### **Composants crÃ©Ã©s**

- `FormCustomizer.tsx` - Interface de gestion
- `useFormConfig.ts` - Hook pour la configuration
- Modifications dans `BookingForm.tsx` - Rendu conditionnel

## ğŸ“‹ **Guide d'utilisation**

### **Ã‰tape 1 : AccÃ©der Ã  la configuration**

1. Se connecter au dashboard admin
2. Aller dans "Formulaire de rÃ©servation"

### **Ã‰tape 2 : Personnaliser les champs**

1. Visualiser les champs obligatoires (non modifiables)
2. Activer/dÃ©sactiver les champs optionnels selon vos besoins
3. Voir l'aperÃ§u en temps rÃ©el

### **Ã‰tape 3 : Sauvegarder**

1. Cliquer sur "Sauvegarder la configuration"
2. La modification prend effet immÃ©diatement
3. Tester avec une nouvelle rÃ©servation

### **Ã‰tape 4 : VÃ©rification**

1. Aller sur votre page de rÃ©servation publique
2. VÃ©rifier que les champs masquÃ©s n'apparaissent plus
3. Tester la rÃ©servation complÃ¨te

## ğŸ’¡ **Cas d'usage recommandÃ©s**

### **HÃ´tel urbain moderne**

- Masquer : Lieu de naissance, NÂ° d'identification
- Garder : Adresse, VÃ©hicule (pour parking)

### **Chambres d'hÃ´tes rurales**

- Masquer : Code postal, Pays (si local)
- Garder : TÃ©lÃ©phone, Date de naissance (hospitalitÃ©)

### **Parking de nuit simple**

- Masquer : Adresse, Lieu de naissance, Code postal
- Garder : VÃ©hicule, TÃ©lÃ©phone, Email

### **Ã‰tablissement international**

- Garder : Tous les champs d'adresse, Pays
- Masquer : Lieu de naissance

## âš ï¸ **Points d'attention**

### **Champs obligatoires**

- Les champs marquÃ©s comme obligatoires ne peuvent jamais Ãªtre dÃ©sactivÃ©s
- Ils sont essentiels au fonctionnement de la rÃ©servation

### **Impact sur la validation**

- La validation cÃ´tÃ© client s'adapte automatiquement
- Seuls les champs activÃ©s et requis sont validÃ©s
- La validation cÃ´tÃ© serveur reste identique

### **CompatibilitÃ©**

- Cette configuration s'applique uniquement aux rÃ©servations de nuit
- Les rÃ©servations parking jour utilisent leur propre formulaire simplifiÃ©
- Les rÃ©servations existantes ne sont pas affectÃ©es

## ğŸ”„ **Ã‰volutions futures possibles**

### **Version avancÃ©e**

- Configuration par type de chambre
- Champs conditionnels (ex: vÃ©hicule si parking disponible)
- Templates de configuration prÃ©dÃ©finis

### **IntÃ©gration**

- Export de la configuration
- Import de configurations entre Ã©tablissements
- API publique pour dÃ©veloppeurs tiers

---

## ğŸ“ **Support**

En cas de problÃ¨me ou pour des questions :

1. VÃ©rifiez que tous les champs obligatoires restent actifs
2. Testez une rÃ©servation aprÃ¨s chaque modification
3. Consultez les logs en cas d'erreur de sauvegarde

_DerniÃ¨re mise Ã  jour : 24 juillet 2025_
